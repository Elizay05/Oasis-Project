{% load humanize %}
    
    <h1 style="color: #fc4664; font-family: Nunito;">Carrito de compra ({{ items }})</h1>

    {% if request.session.carrito %}
    <br>
    {% for p in request.session.carrito %}
    <div class="card mb-3 w-100" style="height: 120px; padding: 2%;">
        <div class="row g-0">
            <div class="col-md-4">
                <img src="{{ p.foto }}" class="img-fluid rounded-start" style="object-fit: cover; width: 100%; height: 105px;">
            </div>
            <div class="col-md-8">
                <div class="card-body">
                    <h5 class="card-title" style="font-family: Nunito;">{{ p.producto }}</h5>
                    <div class="d-flex justify-content-between">
                        <h6 class="card-text" style="font-family: Nunito;"><strong>{{ p.subtotal|intcomma }}</strong></h6>                        
                        <input type="hidden" name="id" id="id_{{ p.id }}" value="{{ p.id }}" />
                        <input type="number" name="cantidad" id="cantidad_carrito_{{ p.id }}" min="1" class="form-control" value="{{ p.cantidad }}" style="max-width: 100px; font-family: Nunito;" onchange="actualizar_totales_carrito(`{% url 'actualizar_totales_carrito' p.id %}`, {{ p.id }});">
                    </div>
                </div>
            </div>
            <a type="button" href="javascript:carrito_eliminar(`{% url 'carrito_eliminar' p.id %}`)" class="btn-close position-absolute top-0 end-0" style="padding: 3%; font-size: 10px;" aria-label="Close"></a>
        </div>
    </div>
    {% endfor %}
    <div class="d-flex justify-content-between" style="margin: 5%; border-bottom: 1px solid gray;">
        <h5 style="color: white;"><strong>TOTAL</strong></h5>
        <h5 style="color: white;"><strong>{{ total|intcomma }}</strong></h5>
    </div>
    <div class="d-flex justify-content-end">
        <a class="btn btn-block" href="{% url 'vaciar_carrito' %}" style="background-color: rgb(170, 70, 252); color: white;">Eliminar todo<i class="bi bi-trash3-fill"></i></a>
    </div>
    <br>
    <div class="d-flex">
        <a class="btn btn-success w-100" href="{% url 'crear_venta' %}" style="background-color: #fc4664; border-color: #fc4664"> Pagar</a>
    </div>
    {% else %}
        <p>No hay productos en el carrito</p>
    {% endif %}


