{% load humanize %}
    
    <h5>Productos</h5>

    {% if request.session.carrito %}
    <br>
        {% for p in request.session.carrito %}
            <div class="d-flex justify-content-between">
                <div class="d-flex justify-content-between" style="width: 75%; height: 50px;">
                    <input type="hidden" name="id" id="id_{{ p.id }}" value="{{ p.id }}" />
                    <input type="number" name="cantidad" id="cantidad_carrito_{{ p.id }}" min="1" class="form-control" value="{{ p.cantidad }}" style="max-width: 70px; font-family: Nunito;" onchange="actualizar_totales_carrito(`{% url 'actualizar_totales_carrito_admin' p.id %}`, {{ p.id }});">
                    <img src="{{ p.foto }}" class="img-fluid rounded-start" style="object-fit: cover; width: 10%; height: 100%;">
                    <p><strong>{{ p.producto }}</strong></p>
                </div>
                <h6 class="card-text" style="font-family: Nunito;"><strong>{{ p.subtotal|intcomma }}</strong></h6>  
                <a type="button" href="javascript:carrito_eliminar(`{% url 'carrito_eliminar_admin' p.id %}`)" class="btn-close position-absolute top-0 end-0" style="padding: 3%; font-size: 10px;" aria-label="Close"></a>
            </div>
            <div class="card mb-3 w-100" style="height: 100px; padding: 2%;">
                <div class="row g-0 w-100">
                    <div class="col-md-4">
                        <img src="{{ p.foto }}" class="img-fluid rounded-start" style="object-fit: cover; width: 100%; height: 50px;">
                    </div>
                    <div class="col-md-8">
                        <div class="card-body">
                            <h5 class="card-title" style="font-family: Nunito;">{{ p.producto }}</h5>
                            <div class="d-flex justify-content-between">
                                <h6 class="card-text" style="font-family: Nunito;"><strong>{{ p.subtotal|intcomma }}</strong></h6>                        
                                <input type="hidden" name="id" id="id_{{ p.id }}" value="{{ p.id }}" />
                                <input type="number" name="cantidad" id="cantidad_carrito_{{ p.id }}" min="1" class="form-control" value="{{ p.cantidad }}" style="max-width: 100px; font-family: Nunito;" onchange="actualizar_totales_carrito(`{% url 'actualizar_totales_carrito_admin' p.id %}`, {{ p.id }});">
                            </div>
                        </div>
                    </div>
                    <a type="button" href="javascript:carrito_eliminar(`{% url 'carrito_eliminar_admin' p.id %}`)" class="btn-close position-absolute top-0 end-0" style="padding: 3%; font-size: 10px;" aria-label="Close"></a>
                </div>
            </div>
        {% endfor %}
    <div class="d-flex justify-content-between">
        <h5><strong>TOTAL</strong></h5>
        <h5><strong>{{ total|intcomma }}</strong></h5>
    </div>
    <div class="d-flex justify-content-end">
        <a class="btn btn-block" href="{% url 'vaciar_carrito_admin' %}" style="background-color: rgb(170, 70, 252); color: white;">Eliminar todo<i class="bi bi-trash3-fill"></i></a>
    </div>
    <br>
    <div class="d-flex">
        <a class="btn btn-success w-100" href="{% url 'crear_venta' %}" style="background-color: #fc4664; border-color: #fc4664"> Pagar</a>
    </div>
    {% else %}
        <p>No hay productos en el pedido</p>
    {% endif %}